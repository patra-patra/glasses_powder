<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Очки Sunmaster — Очки и Пудра</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../product-cards.css">
    <link rel="stylesheet" href="../menu_style.css">
    <link rel="stylesheet" href="product.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="shortcut icon" href="../img/sign.png">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="logo"><a href="../index.html">Очки & Пудра</a></h1>
            <nav class="nav">
                <input type="checkbox" id="nav-toggle" class="nav-toggle">
                <label for="nav-toggle" class="nav-toggle-label">
                    <span></span>
                </label>
                <ul>
                    <li>
                        <a href="../category_page/empty_category_page.html" class="has-submenu">Косметика</a>
                        <ul class="sub-menu">
                            <li><a href="../category_page/empty_category_page.html">Лицо</a></li>
                            <li>
                                <a href="../category_page/empty_category_page.html" class="has-submenu">Глаза</a>
                            </li>
                            <li><a href="../category_page/empty_category_page.html">Брови</a></li>
                            <li><a href="../category_page/empty_category_page.html">Губы</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="../category_page/empty_category_page.html" class="has-submenu">Очки</a>
                        <ul class="sub-menu">
                            <li><a href="../category_page/empty_category_page.html">Солнцезащитные</a></li>
                            <li><a href="../category_page/empty_category_page.html">Оптические</a></li>
                            <li><a href="../category_page/empty_category_page.html">Компьютерные</a></li>
                            <li><a href="../category_page/empty_category_page.html">Спортивные</a></li>
                        </ul>
                    </li>
                    <li><a href="../contact/contact.html">Контакты</a></li>
                    <li>
                        <a href="../cart/cart.html" class="cart-link" title="Корзина">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-text">Корзина</span>
                        </a>
                    </li>
                    <li>
                        <a class="cart-link" id="searchMenu" title="Поиск">
                            <i class="fas fa-search"></i>
                            <span class="cart-text">Поиск</span>
                        </a>
                    </li>
                    <li>
                        <a href="../registration_auth/regitsration_auth.html" class="cart-link" title="Вход/регистрация">
                            <i class="fas fa-user"></i>
                            <span class="cart-text">Вход / регистрация</span>
                        </a>
                    </li>
                    <li>
                        <a href="../account/account.html" class="cart-link" title="Кабинет">
                            <i class="fas fa-user"></i>
                            <span class="cart-text">Кабинет</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <!-- Поисковая строка -->
            <div class="search-block" id="searchBlock">
                <form class="search-form">
                    <input type="text" placeholder="Поиск товаров..." class="search-input">
                    <button type="submit" class="search-button">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>
        </div>
    </header>

    <main class="product-page">
        <div class="container">
            <!--Основная информация о товаре-->
            <div class="product-main">
                <!--Галерея изображения товара-->
                <div class="product-gallery">
                    <div class="product-main-image">
                        <img src="{{ url_for('static', filename='img/products/' ~ product.photonum) }}" alt="{{ product.name }}" id="main-product-image">

                    </div>
                </div>

                <!--Информация о товаре-->
                <div class="product-info-block">
                    <h1 class="product-title">{{ product.name }}</h1>
                    <div class="product-sku">Артикул: {{ product.id }}</div>

                    <div class="product-price-block">
                        {% if product.old_price %}
                        <div class="product-old-price">{{ product.old_price }} ₽</div>
                        <div class="product-price">{{ product.price }} ₽</div>
                        <div class="product-discount">-{{ product.discount_percent }}%</div>
                        {% else %}
                        <div class="product-price">{{ product.price }} ₽</div>
                        {% endif %}
                    </div>

                    <div class="product-full-description">
                        {% if product.desc and product.desc != "no" and product.desc|length > 10 %}
                        {{ product.desc }}
                        {% else %}
                        Описание отсутствует
                        {% endif %}
                    </div>

                    <!--Кнопки действий-->
                    <div class="product-actions">
                        <form action="{{ url_for('add_to_cart') }}" method="POST" id="main-add-to-cart-form">
                            <input type="hidden" name="product_id" value="{{ product.id }}">
                            <button type="submit" class="btn btn-primary add-to-cart">
                                <i class="fas fa-shopping-cart"></i> Добавить в корзину
                            </button>
                        </form>
                    </div>

                    <!--Дополнительная информация-->
                    <div class="product-additional-info">
                        <div class="info-item">
                            <i class="fas fa-truck"></i>
                            <span>Бесплатная доставка при заказе от 5000 ₽</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-undo"></i>
                            <span>Возврат в течение 14 дней</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-shield-alt"></i>
                            <span>Гарантия 1 год</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="product-tabs">
                <div class="tabs-header">
                    <button class="tab-btn active" data-tab="description">Описание</button>
                    <button class="tab-btn" data-tab="additional-info">Дополнительная информация</button>
                </div>

                <div class="tabs-content">
                    <div class="tab-panel active" id="description">
                        <div class="product-full-description">
                            {{ product.desc if product.desc and product.desc != "no" else "Описание отсутствует" }}
                        </div>
                    </div>

                    <div class="tab-panel" id="additional-info">
                        {% set field_names = {
                        'types': 'Раздел',
                        'material': 'Материал',
                        'brand': 'Бренд',
                        'country': 'Страна производства',
                        'color': 'Цвет/Оттенок',
                        'massa': 'Вес',
                        'struct': 'Состав',
                        'use': 'Способ применения'
                        } %}
                        <ul class="product-info-list">
                            {% set skip_fields = ['id', 'name', 'price', 'old_price', 'discount_percent', 'desc', 'url', 'photonum'] %}
                            {% for key, value in product.to_dict().items() %}
                            {% if key not in skip_fields and value and value != "no" %}
                            <li><strong>{{ field_names[key] if key in field_names else key|capitalize }}:</strong> {{ value }}</li>
                            {% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>

            <!--Рекомендуемые товары-->
            <div class="recommended-products">
                <div class="section-header">
                    <h2>Вам также может понравиться</h2>
                </div>

                <div class="product-slider">
                    {% for rec in recommended %}
                    <div class="product-card" data-category="{{ rec.types }}">
                        <a href="{{ url_for('product_page', product_id=rec.id) }}" class="product-card-link">
                            <div class="product-image">
                                <img src="{{ url_for('static', filename='img/products/' ~ rec.photonum) }}" alt="{{ rec.name }}">
                                {% if rec.discount_percent %}
                                <div class="product-badges">
                                    <span class="product-badge">Скидка {{ rec.discount_percent }}%</span>
                                </div>
                                {% endif %}
                            </div>
                            <div class="product-info">
                                <h3>{{ rec.name }}</h3>

                                {% if rec.desc != 'no' %}
                                <p>{{ rec.desc[:120] }}{% if rec.desc|length > 120 %}...{% endif %}</p>
                                {% endif %}

                                <div class="product-bottom">
                                    <div class="product-price">{{ rec.price }} ₽</div>
                                    <form action="{{ url_for('add_to_cart') }}" method="POST" class="add-to-cart-form">
                                        <input type="hidden" name="product_id" value="{{ rec.id }}">
                                        <button type="submit" class="btn-primary add-to-cart">В корзину</button>
                                    </form>
                                </div>

                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-columns">
                <div class="footer-column">
                    <h3 class="logo">Очки & Пудра</h3>
                    <p>Ваш источник лучших косметических средств и стильных очков.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                        <a href="#"><i class="fab fa-vk"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h4>Навигация</h4>
                    <ul>
                        <li><a href="../index.html#about">О нас</a></li>
                        <li><a href="../index.html#cosmetics">Косметика</a></li>
                        <li><a href="../index.html#glasses">Очки</a></li>
                        <li><a href="../index.html#blog">Блог</a></li>
                        <li><a href="../index.html#contact">Контакты</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Контакты</h4>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> Москва, Мясницкая ул., 13 строение 2</li>
                        <li><i class="fas fa-phone"></i> +7 (999) 123-45-67</li>
                        <li><i class="fas fa-envelope"></i> info@beautyvision.ru</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Очки & Пудра. Все права защищены.</p>
            </div>
        </div>
    </footer>


    <script src="product.js"></script>
    <script src="../script.js"></script>
</body>
</html>